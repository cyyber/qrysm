package main

import (
	"context"
	"encoding/hex"
	"fmt"
	"path/filepath"
	"testing"

	"github.com/theQRL/qrysm/v4/testing/require"
	"github.com/theQRL/qrysm/v4/validator/accounts/wallet"
	"github.com/theQRL/qrysm/v4/validator/keymanager"
	"github.com/theQRL/qrysm/v4/validator/keymanager/local"
)

//const testMnemonic = "abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about"

var (
	testSeeds = [][]byte{
		hexDecodeOrDie("d064295b4046837c764876e9625f435986b3916ab4e4f353571f8e8cc0d827d5e108cf0ce15ac7d5a3c2a52c06af6dc4"),
		hexDecodeOrDie("9753a475c77aa5d250420aa8b37b52b6a9f6ee2e9db39b1aba2b27871028f7d3156f4f5a5a7e82f9ce062c7813c8a9bf"),
		hexDecodeOrDie("fc796a2fbb0d5693ce654d5ae455c0b8a007a23c0390c9b6745d7dd7c546c7750e399bf77a2a5f1628b1cec5c301f34f"),
		hexDecodeOrDie("34333280147cb8acea5a6bf03be42909a7d26306c23c8463b82a1377b20f3e47301317c7520d853189e6c79b16cc75e7"),
		hexDecodeOrDie("e73b3a3df121c010aff29e90af99ddc970411e8ed4e79e4987d3d3eef3782169f02ad5d058d27cf4b9215294f5d0bbd7"),
	}
	testPubKeys = [][]byte{
		hexDecodeOrDie("e1c43c464b1bf8834ce9073cbee301b3681a2b3581f2ec3ceafd18eec3f663008ce413c7cba4af0e7c8c15ebd6b450d9a1b2b94a288784c42d4476b2be2daed96d5180fb50152af1c64c5f784d02a3c86808d5551459ca4c296c0b0bd1e10ef186f8eadde3298b9c8d3fce7933690c7abfe954c6f21fe792769d199473f9634bdf8142e77255ef775a6c5d3f0a7b2251c967c5ceb617e32b14d969d2f8fa69ecd62cba7b7ffbebcd1ec6c6cfee806caa46dbe28f454267d6d60595827dc3786378c4277e170a8d5bee17ab1b54d62817a6cb428190c32f90747956092aaa28ac39973c4a031d7195fc595e190f02db82d749e869747c5e1bb80055772a9d264e851e7a8452b6b48afba5777cb1402af9e3511713e859ae20e9fa7e51ae0e13f8003e18a3d6fae46e981d28a2108063de5b8b91c1a583822e3974e2089eeba8d13089e3778a606054b1324981774730d1b707756cfe8b438699696a638a9ce3554bbf2dd53d1fca95f3da7c4ac8852157116743ff7aff293641b43e0ab86bd484cad7d29c30a0a574dd94faf997b2e8d6c0c3fc444d997038f3accd9a355c994e77ebea0f2a777c7363709953dd04a431303c94cbb861b3a8a6faa2fff386f4ff6277ec5d3bcd00a3a37d7d096674638a84796f2ab926352ceffcdcfbbe9929b637471c595d95fdabcf193920cab52b4d4bcd6ccfac402fd655d1451cfcd9d35609a7aaa2e6a85135322ea834f460e562b6916f1d4816edae7b3720567410d3ac9683c3e36e340e4814ec08097daf1224d0634baa2c0d4ff18616f5e55e796478a36220b23a2d9522b993bcdc44c946fea713405aa9e553a4b0e987c43253755ab52409893492261a66489f35eff781aae9b2003e37dd23d9d5f0864f3a549cacd797c78850d2e4267bdca4d7c42d64bdde8179ca382a264c1320d2c1615677d5c50051f764de75adf19e1606cb5152cd1afab42ec4bf248f0c241645561de5ea8ce2d7d0184f253b5e6be05c20d0f4e2e66989ddc75b7038147a5fb704ed6512784e2938a88bc6bdb2fade331dd628ebf673954ffbc6b6e20cc9b1e164b0c8fcdc5eff5ac40b493ff1bc607912d0aa92153fe6906d2e8bd2682908e4affdb6a6f3b271a52458b461b5c7c617756ee34289b977b4de5a3955f07dfdb6bb8a23b0b7255e8891d68dba26168cb88c4c07d141ad35a2db087ef5aedab7df70df76f12e5abc623216ff65dc6833d997f03ed200d8661ce6d9791ec33fbe8c89c1c0a15b7080ef326e971bcff06e6249e360f43ba735bdba11c521ef30aa0685f060e04d22050d67328242275a587a4009809412857117595f0c2d87deb92b346649156e394ca90bab7f4e7b29ab1989994235d6c974c6243205c3a4cdadc4dfe377ed128d59b17ba5fd4ece14136400f2ab836c56038afe8d83b4f133608749822723f074960e80ae63e681c80189c85d059c6f90511faef527480260e5ba2c17a5a7a6b5d3aa1cb5360a9a882f23570228245998757997a9ba7ef7a0233f54cfd39ecd0b53b4b28dbef61bae0f74a146fe48c7306e49c77625f4f2986a7cf0da39ce2c1262d998b6ac7ac384aa68e27980ebf8dc3a0060d4af9cc8a0e10c7d140572ed6cf474a7356a48c9f498c8e658ea14017b48fbf31f5aef16bdba42c6e4b0b385a97e674915adf4e2508349703f0f3491021ac4d65beb2ecc9026a92b3988efa92d08d61ba4d43d165f7c4d7233c761ce2b77d92157c74e58a51b0ec1ef56deb900a12950fb1b6502135157c5b416f6d51719a57dc5cdbb6a280ab104b0bbc1744d9f8d591e4c8f71eebc1ecf33fec849057eb27e7268bca51820e94bfdec15315a00ea601c7eac571c0ac7d1ee71a03b14d8a819cfb12f91e802ae886e137d6e6cdec5c7c32790b816e8a67a962a2a7a371805c8ad33c3612a61c376a71d314048f6c205f2787b78c73dee54e814e0a82192fff57ff2b676588521bdc9dd031617fc7892e6e9ee62d50be4646f4966bd508d960937d991c4e65fa02ce724d61de2e4b26000e1baa0a2737b0e657ba738d34b1933cf7f94b6104887f131de05cd36610ca03457861984f1aa29789715993aa60e7ff408d876e3f03c8a6ae0699d88895ceae91587f9a51fcc6e1b998628626bb99366e8ecf1b7e314385673be4dedb1253fe21acc161ca15b7a7180485bcf5e90fd09c1708e5e0c9fcf91c18e937e4bdefdf37aecbcbae3c6ac274a02ca25a38b5527c649e1298a9b8a3138d7704d018982704f6c76fb42e9d746366ecb41152aa02c20165c444ced3d570d951c3d37535a4df8d66433a1896bd11e98a769d79e8f1d06e07269848a490f9cdef77198262ca6842555ead28ed0e222969ac8f34423fe61fafb7485614ab82a3332d5d633c807d3fd5b418444ae324c1e70633b67f34157d702d8f51e7a0ec0ed4b34b9bd2dd470592ea66d04b8f71378ae8717921d549b5b1c188c99d6df136e2b62f34fc3f9e2d76ed6da663c90e18880068d5b4b95da3a368721135156f413d20ca90a6ecda7eab217454d460c649c2f15d6f0eb530ba6a1aa838e5df3f464a11fb1dd0eb98bc3efb25e8b622eed4c4865a5d8166a21292c8eb8660ab74d077af54352fec1a4ffb356815bc4a7c589cde2266d242160d924cb484d1b0a2be724a671e3390947a68b11e8b17a7b90dec33e7fae5d85bfec8e6820edc5b7a5de40ca9b4fdd20eebb7d39a81656b1a2264210d31dd01e59f7b85badf087d846a71a0a091847a7bfb52ffdb31b11f5df96fbc504fd30abb902cd3dd1fefb9bf5a83bb378d47e5e5196565827676ab0c847e01ce9869dc17077c7db8ee28cdda60465e8aeef75049e3fc92cf309b8f25c1766aaed8f0ec6862a3131857b89db34d05c9b852d8779fbc1f2caa5e8cb85d7afb0a336f22819cfc960e475e980fda1a0cc605deb1d4eaa5bc91575937a51fa5943a29f4eb62be8edc32733770aa3e5396f698ea6a7952f9e02de1bcf253e0843662bc9a3e3341dda581942c07b326f26138c8b083a043f9e4cab6e911602a8e2ff0ccb5bbafa8db749b25a98ff1aa8c1e9523719e3c0f4faa9871422905438477a99f8ac6cb1d09873af136574c9a0fc3a9d834d792fd80553a77e4e4f5e2877512980a762585079b8bd0b85adb23fd9370b3b3846d8ee50550a3da6c0c89dda6e2096f3f6eb45d3886339e78747931d95eeccc4cb809af50b20fbbadf17f0af9798b23d1c78147afbe257500131d88c25275e3ef665bde36eda69a212b66baffbc8f1ac2e1c3b222ff982ec41353cc8da50fd7f1f1f80591158ad160148d837ae8e61ce80b3e7fcc21f9e7ab16b209d7d6152202d96762bfa9e0d334ce727ff741a89f4d3ebe0b0882fec97ae3117ba162426a48c232df562098a78fc6dbf6d5424e97358f95456a78afd92395b6cacb3936a2aacdf89e1ed46e560974647645682223e0de1fe451f97a10fe9f09467bdffd5e7e61dd414cdff9dce3c3e4fca98bee2c362671bc0848cfe5ac5443fedd53a913e04d7d728ab1d4d6626b7d8d5ffcccc9310548068d1f751d54158d96d9417877b068cca00871190166a918cb5311b0eb993b5d462a9a7567e47e3adb338d6dfaceaea67c01a93dc600288e478088932306d95329c64a7e494edf227ae"),
		hexDecodeOrDie("d3abd9e1a2f5d0e1944909c764e15a987f539e20cb6bb1f238d06fadb3cbb1de167f4c21897718923f57eede8525a48f1832346a07d5bd9cba3ade493033977b03c5f435984241676a86a35e61eb2db160844ad193078aff11d2afba8bb9e99a727f27786ee9714266a30c471e0a0a5433d8a81ae1f88bb767926ed24f99dbe120404022da966d1b345dbcace0ba8b08624854e3cca671172cda4c89bddef62389cbd62744b3ce1ebba44cbce99fceea1daf0b006412b2348874822e6573d92f7e72eb728437585466a237bbfbdc3bb23aabdbe56c5301425b447364258ce2c7ac432a853b9bc11629fa89ce02009e29642ed1595532bc2b35fab4c0ca2368371587cecec3942927a275ece20ce7932f20d5d51ac280e3b4e1177ac252a052330bf452418fd232be654083366b42e99c02a5ef750f6d4f2abe1a302d11195c05f88249666ec289518a33e0098a9dfb49352b23fad35ce2425da4f0adb485416803ed3e5c8820d9edc9c7095578d5b9b597f6b5f9189e7b763df2db16cd9d5a96a44f49b528e9c2baec859787494e438e73f2263c79e7d11834c0e70aaf637b5194567703009ce3a20345609bcd3484f094ddc1277b366de63fe55aef586c9d295036e820691654e2c7b00fea267f2ca20a478e40072e425ec485cb981adf13bda9f6b91e436ab06d48b5f23ebada3ca98fb75601de677d3de45ae35df1d8f3df480d5522ca0f068ed4b3c163f2bedef19c6b444dd62f0f9e54c4f75f378d87cb49a1794e5d0def1418e53106291ae3a07d317c2cf8abe6e60070d486d816f900073f61c1b33f6b9d47e8898b53d4542026c80c211cb0b2059a3912f69fc1a3c4485832d8e37d0b09dac908c79d1b58a6274716a54e024710b588b7d463e1c7ddb8ab96f592fbb7e4abd736e5080ddcfa4dfe3f76f9c6fb4059971843a746b1d589ece213a40606493b9ccdb13bf9bb814eb08d81e64da518840b3f6d19a0da61c842a6f8a8a73b8d2c6726f9fb719190bc9646051e764be051ffe61bca29e60df01145a012dcdd4c4353798fef884124761aadf22e57037dd896e1ee8f24b45debf6828556cf58b1bfc3518c63405735f2471eda260c8f90573bcb142b71a67b224c388e9c45afb21725fc2c000ffe721a71e39c8993b83dbc7acfbbac814cf65953096cf8436b3de0e1e8f6d44fc77b83c8c29bfa50d8a9f89bf93a3639f73668dc196ff8182587c5da22419905fd9c2edd528eaae7ba4449deb136250a82dd0b59a9a61ddb322db2c234ddeaa0d16f7254d034a0f9719c7d22dc861f3041382609c1d7486e9c2d5dc02c8624d4ab4fa873c2192f863570a068b85b5640e589204333b6d1f214a8e8899cd512e4acb542bb6c603a4d8b27412224e75bd35abe85ee0645d90d3006da1b4446e75a6080369b8c8cc0bf84584c4924a0dc82aedade16537abc3a58f0cf3acee5800dc7d13dc23574831e73ea8be8fb472163468218c2820f910f0f11f21b800d362fde82a3b36ef9fed223a81f7eff8027f0be06fdee0b575224ae14d58c1e92cd5e9a1aeb7a9f7bed7c05a951dafa69571a119b12aaa7ae3ee02a9694bd00a559d6b59f592590f7766137b1db5d4e8f72b4058e6a1efa019b72614d206ed054ab61f50bd724eb0fc226008751951acd609ac027fc618c04de3db230d9077e83fef11487383ea727897b18878ac3dfa430a235675b9f4c97ea5568df50dfca69191a60e3084c3abbd6e47dea9c3cb197785a43918bfde743b05322f4cde1222426f564e29e99ff1d207f35c00a72aeed2b631b0589655accd90b6207cf10a7faaaccd85db6db673cf5d02ec58aba75a773f60a1f9da8aebd7cc5dd2c2db6c478f864b3726444d51e45fbdcdc8b231a322a5538a64694d14c6046f6cadaedb10eadb139cdd10a99c104590e70e778a7ea3a9205f64c707350117fad8ad1e6e6dcae13f1cf2e026cfe31bf9a95e9993a50b8ab2140ca63a90f61da5931bb0439f26359f6a2d2429cb87d21119e0d649584407d302cf36052fc34459a7f05c18c774c19595315479214a86a2784b05861e2aec7ccdf9e6fbcc669913f6622cc4830f7c2166fb1371a44b46941f0cda15fceaf6f41fbdf67a4aa83fbd9f16463f0ed281da83e3e62219498bba4f94ddac74c7a516fd05c9ca2ed7db5bef295001e081b554bec04c8547fffe43d9075351f14e065fd6196b99f21530614d43f50f940b31863ef9f240cfbdcb28314e323263c95c77971827e33b79755baa05ca495022c8dad92ae30fe54421d217269bb231546c4542afba394505eca1ec9914803bf25ebb5d676fa38b1df17a245c19ce6cf497f7f9cb9f800944fec3c0c36631216a901b4f8424317cd3440dac0754fbf484348cc928d1ff210acbc2bd8a78953d50a7ff28efbc361b661a97dd8cae46c6b7975129ac38b927c4af35a0f3b5325c5cce6a1fc13b5ae690d6abe937abb340043f1fe89c36ba467453c91dc87e8e5b0251012b312f64699a34692b0a69187445b1d0ba81359f8d0db2ac6fefe893a42b1f2a2e40e08f27edc24462034c673f62dc44794868fd8d3455c4f768318f7348be67b69c8ae9066bd8ee08344e61f09542497d9dc0b8bab08406ca20d4d1b8b259d91e367d06aaca6e267be30da2a1f90c4ffeb9b00a7b363b349829b7ba2ca00450a927b5ed4f98e6c860c1d62c24d639ac4a21dadd0ff097804bffc3a8b8d28db9e2d727c55003501819f25a4baef1f2934884c21509b54c6fcc44123ed9cc6a3190d7a89e2a42717118cf3ab02b90327ebc0c95a5de8167d5a7150d848c83d73ee4eed67b3d2ad6724c451e8fd771a10d20e0324fb5202631468d9bf77fa3fc51f2d5c95d76539282a5cf5a204097d8de103ab75d77d0fe095292bd683fb13cdbd21eff94237a617513757cb590c39447fe8e732df071069a7f3aa5dd98dfe882f11b0aa842cc6bf3e5194bda5290cd17a76293dd1e6aa9a5ba0469dbbbdc2f501337bf08247733739f439b52f26415c924286b7a9927cc36959bb1cac0a50064597baf6a396080a78b956cd61c340e242b69d845a5d85fe8d7991fa6858295ff27266aaf3274f8d4d0e7879585678043ec73ab5bf4004bb06050b2dc96282af3aeac6e1cdcd9d342016f4e5f7001436eac0580bd748f329a61d139a32019f836ac73979aeb2636ff619289f24ea5d253d251cd6865241e5688c24d5bc894031883ecdf8b402abe177609d57e4bd4a8e364e879ffff5c061327a7116725b22d0c5e52f2db93b042eecf1d5c01f298986709077a9b5f4f75cb929597e3cd9d314bc7b78cdc4d76927fa46dd3080f17b67dc9d61129b9decf09be618825856b1dc491d13cb78b3d62132395c61162a13caad77f1a1292e6951e57e9ae6141c7b8197d10a45753b491a0bca3f8a7c55c46e4a650ca27c30aca62632d27726f2c5f64ccd32f0ceadf372db93e94d01cdcb90d8a6b9397536329f77911f155bd381fa9765242da29fcc38ed10390b6fc5b53bc88127ff1d35467208f82a4eded7189f1a4f52afa8bd6f3610ed5bc4c38dcf8653bf3c4bf9404c47359e33662ea8b2f01ebd761207452cbafa57bdb76f5470cfd4330a8be73700b02f0a6c3a00d8c2668df71c36b70d3cc3ad496c7df465ce7a6f40"),
		hexDecodeOrDie("1e1942a02dc861fa95044a75abe4195126137cd72cfa60b30d976e3958d875b4f3d1b6875af4eb3df0975a57cd13acd93a7ef9f33f50a171509a57f434047c5503183b1be86c370f25f43a8c95661c29e301d3c616dc28cb7b1314a279fa1c05860a0540a10cdfc6967883d6b04997d2a9145feac11f15bbf7ff9ac3807da1eef340c1a6be89fa2d860be1aac3f4e4f38713d7d3c24e0a68e4ec02a5404344639c0ff0fe2a5e40253ffe27d5e77144544188532d57a6ed50b9f9543937f78461da21b8c8a37c48ad0cb69b5945bf728b5b65f51b74e8282c7bc8e217df49e3d45fc589a26785f3cc0ec772f8893c01b3f3788af74ccec26bb5fe01f5b60272a6680b526c4569c4c37287519084cd3b08311703254dfa6326f6553fd7f8397945b0938439b00bac178c12ff868dcf6a3e1096b9e72087837ca50d0eaeeb0fe7132dfce5ceae71d5209aea7abaf95d79a8269604332f8470e606f52ab8f21e7b247faee90ad3350530d0a37d8157a2c5bc89d502229e6c02e5050841355d98d66a9a8c3836574f5d56828ad7263e46e75820a5cc6fb6f212e9a0677b235658e539c158d590b45f3324ef6b240191fb538519fca286b4f6e3830810a9e8880e534c22cbd130e60c46b4af9b0109b6df7808f679e1ca5fe382651030a9d1eeb23b17bf8013beb8e361045f70852db7ad7caa18f9fc5a5cdf8435d1ba3a455669bd75a8ac2dc87005434a7c6bf8c50055956e8b61b86f19526d9ab385718b501f78b8f65bd0ed6a24da8141d186a955907beea7e68b4dfbe0e4b54b0be4bb8f163044ab955b1e7902d9edee5146fb46e52c140fa5203e7edc16eb9add3bcac81f2e71096c62a9280197fa70739d066d359a0b7983e521f3e3548dcd4ea1cb891e9164f46a4dc1d16fce28a567b2f01d964eb92247de3b5718fea8059956982dfb48a0b5ad932130326ff69c866e68f0362a1868f6031504f63c8141f8df29d7e43e47b8d3de4d00b44d6fbb4be688dcc74e7353268e6e6dbf55ea11d8dd7a905217e4efe29f9cee13086292544eca817bac5d05deb33ab9541c7054156824fa4b9793512959d9c7f3332fbbc17204f23bfeaaf29fd8c3d7244a166827f04ed65ca9570ae167e811fad11dcb8cec24b502c6ea2c07b5f9ef8069877c3b4420ba38f8ce4d5b347c2f6678bcd4e65816e2f6e7f9011e2bab077008578352001b9f50a93a54a19a361819cf72975f01f1915fd21767ea015df6634bb9fe58d1006bbe607d49ef013b62c41b4cdcd31112efab940e7a7d03214eae4d1a27a5e9378ddc8e203655f9e865fbf86a04ee51d91b067d2af408786f9234a7f343434f6f07fafa17256e3d161efe77b55c8a4a15f5e7258c66fc74160b526f6139a17f92418f316166ce0ac28c07ec2cdff7bac67730673b062d266598d6ad805a606a33372dacb6166104399d06147237649647bc9f3f89fda832d8fcc98c9c36d23b5bd0130e43ca3cb57e2c127dabaa7d8a69e682aac247982fc56c36126cf2bc483741c95afee5b816112b75bc15b224d4a336c6d2fc16a2dd768406ca203ef4de0b233504758cba28517f2b42a48558391f2639f375a9b80b35a72474ab0de38c2e0a876031124d828cf0311e9169e8d9d53d746782cbdc4495044be26d0648b0ada55e485a10c7221460456faecc8f47a81bdbce20d93e03f60d7748bf1abc5de2f9255a10bdc6e1b0fe567600b72b8b4b4bab909b04004858ded684660f6405c32bc73f6129da6cae5e6bb2fa94376a4fbfa4679617c2e0b2af5001115773f5748c7e28c78ced8ad7368ebfd7c2b23b2f69eef60011e3ce1b6f650a795c06d0171d047a38ecda2da4ca48ca9b61054b8b553b9f82f481c44aeedcd17fa824c117c1be0fdfcb7142b21f3b8169c9b9f8123f2fba81155aa99f65e1dfdda763522aae2a25baa7a606a7f4b7f52c092fc3d32270b50d4af0a73b3aa0d25333c2ebb449d24e0f38fd97b9188186014d936aa899d79629ddbee2ef075a94732444ef0f7df0363d4cd0683697c6c99b819b53bf32834dd6ecb167f5ae1c36777f2e097ee160b8b308684a90df0c42fe3b70ef0c754b5cb28914f20e76d8493aeaf0bda7c2ed4a335894e823aee6137df4e51d02217b8101861cad6a8537c4e5ec4b7110b09e19baa85a4a486511d0c6ae63cb9e7a91c7de2277426fdfd439763d7f3d95e406e84c52566ff0ae0e29d08083e8d4d65257592fb3de3718308061f54380be30221e52990a2d0d06312aa907fef82ba7eb637cb7930dee9f73dbae1e59fb57e8c31b6c7604e41462a82156d415a8876827fa03d206b5069556ecfa96eac43bf8c04bae008e6e4c9506fc5da5d468ef8006ec58853ff16bfaaab83f9930ee3dff823cbf2a20920d785103c0720cbff2094abef6b41b0c2d8ddbf5da51e7013c3738781b372f25e2517bb0c3c750ca14b8587475c9217e79029636ed671a1d62872fb47d1659dc135e08e4a4426cd568f72bd588e9582859e53081b635dd268427ac161ffa17023fe73ef7e84fd89f3dd090df9863f27244f5feb55fa8c2ce2ad58d614a3e997747db56112a7ba48c5b69f4f86a7ce91b4f7757b2413061899ddca677f7945620c7bb9744f0c22f119a77355b327971ba13c8be01468231cebfe0d17b8d9d384770e76cfea2522d36f06c5df3c4b15dbdd5d9bb617d02ea17484cad6cd0561aeb947408071381725af387060a8a437a7d17c090124252f4cced8d870c6ccb9b1e32cce4c9b335e788d5920c09573897f1e6a7690ae8a8e5586ad8e22f27d28641ec48b6519d36f08aa8bba235217423363020a33bc7470393f8588adea46071dbda4eaadf8e4fdb429bb46f1dd171fa00b2edd4dd2ce3cb38517d956c79696a3dfeaa5f74fd32f7e1f159ed3e5671b7b84b195932573461cc69d29ff68110e39c90785255522cab0f096aeb7b7f568b349b71ae295a3067ec2fa2e0bc500da43b125e27da2df21caf885ded65123df9c38e0ad30cbc8a9ede1f1ac38b4c1802d6452e332b37211881c3debc5a0439e7504d959f29101a709b49cdd81739d71c1090c83260746f833c9fbbc6de4f721287bb1397649ccfd164f1f8f3c772108955be5522b2b388dc078146e27428d3f6f198e8fd4e530e2c05542822b8a6b577c6c69c47cbf678a8fb19272aef8fc35bf0f6bea7755825bbd22f2dc6fcd09be8e7f4a6f9f99c3f583bcfd6dcd89b2782433c396beb0fc1c36282a87c1b5575d85077121b1e112ebcb80a24de6e1139201ca466903f73fd495d95edae8a8c6de1ecb57992374e2aea7ceeee102de3ca7468e63d610c05e7c5341eaa31d147294e833b1c9a970fb57de18d75bd68519704c498a0a3350ec3f41746c5dcee86565fdcb3061aa51072fb736b0f4fe6c33ec19f59729b17584c2f903ecddf77ea9f7d3f5d1bc7dab487f59d31b31a62905a9eda962d9245bc4021389391a06ee3785814f4f6b8bec92c397e9bc25e5dec699788d9533947219d73538d5cf22c441b13d021afbd513b5b9d7a3ce74da41d2d2d75e81ec83018b4ea3def636ad514ce40170f3dae9de7b9775bf8fcbc627bf89e93a6eb5783524a6db4be0d8c7fa64df712dfa71bcaa50dd86fec18995f9369f57e9d1ac9434d73504cc130b83736"),
		hexDecodeOrDie("e5c77bbac154e951f5b60f6aee2bb163b8e40dfaf207ae44093c61da931059cb5a27c6456590527e613f9736b7e567990a8d06cfea4e6974e6607d6507ea3fbcbf19c7db498aaf0a0c27d01892346aa2f8f4eda20367ca82900a661a5b79958b01841684fca0bd516f8d61e22b21b76654418d98238d2d95e0dd8745df2c81641dad843aef3dece31db0635b6e92908b3bf5689b1e4a5a7eb1179a4d0485f21e321ffe9f974cc3d8037ad07e16cd410117ee2e8e637010875112f12f1a9c281e21c0e6f38f890b695b6030df23413a953bdf908d83a098c225672b017258c65aa063febdb4bb1a02e24bbd5c7f327c4c62cb7eb9ff93a83c6c3d3a0241cbb42ac94d7f6d4c8327d89214b98759b9e0d348a3660e42197f0cf1d40b5c75f84d427d91063954919d8bb812cdb6a194eac877530e59109928953b8f10dbee42508a26ebf500381b4b5a34a4b4b0c01e12ea05793cf2bae04efea61cdb9f4cc4bd0d6149fff77b386349b5ec850c7c6208748a427f5736c4734702ec316f6fbb2665b19eeb2f82dd095861fc731c5104ef470d14535ffa6475ce25e102a614d4a67eafd4025f4cbaf4833f92b46070fc1f562befacd8335b88e8ccb4d43790c88eeb4b4a2170be767a579cc0c40210d8a899f71f8aa05562821fef1c6e531de08841d9a84ef15a872961d23446c80799c41fb3306866b5b51206f310ebcaa21d6c4c65a3e64c8d9152de7dc68834bb326f7a0e9d20cc9f34028588c60e8f8c875403ba9f24f650967030eb7920847f6f2640ae87dbd3bff84a19907169020a1f7d8302bc951baa25abcf6772242dc056b4ff5ba9d83c29386e75f238cb2580611dba379639e3653b7d67587c4d612f67c269495bd6a57ef0bd4c9bd9df826b2cff240f22805c514f40994a6dd05f1227b7c6a6362c0d9a63fe3fdbeb0586bd2e46c1a5d428b24bb5362a02a872277f3424499887b2ab48805e1682e1d396c160b5ce18e9b94009ef431751da2c177f0b14cccc3689ea6aa16c486f99092c11b42b88cabce5976a68416dfb585c67ff09eeaf47e4e60b38d4dbe905508bec9484c325c79894c812a30ff8de089c56388caa050f371daa1df986ed89715cc4a8816be26d59fe36d1a2f9df1cc01452e8d2722928b49b357175b269349354284c70543601ac760782aa87927f72579a322f8ffb5bd872741ccb3f822cdbc80fd68d9ff4ff798aa6fa6c32aa99f28d1beb9a28999126f521ba53d3271adb75b1f5276478ec319f838b4db0f777475bc1f1e82ed8de4d0a7d6d7289e65867d27434bda7aa5f9946c167e01c75d0a12400378304decff4f10193f58d28f6b1247ae0b0b2f9af24c54296bd08a1a0737f865b55b751083de124d268625184dd7f4991da63fcb3c265c3af92454bdafed7729c19bac1e58f93b79b69d3d6da9a8cbb11d2bc81027b826ffcf936b2dc364d8474ce6bc300c7a032ded6533886f07d55a2303e1c5e6156d0d6c55c2f8b7323972ebc09734eb3cb02e2aeeeb1c9b954b6739c19f926079ece7a4be139487a2b08fe646b7d19683eda60a6b05670ae2b2f580f3ce2304d9e04d626b40c4357a2e3e33c6142d3333babcbbd586d8b8439e3780c54d4e82c70da9bd65f9aead2f152bc7c126e201823f352095aad10b4d27acb36c2d60fa3939ef40634d1aeb9cff15c7a953d73360a2a56cd457e9f211bf07e6ee08f146a792e4c3e0a9e40d725ec0c2ef6ce5a2e4cdf1e95d6c603d18a140472171ebe30f8bbac0696e4ed2de530ed06ecc8d8ee15d172bc94b647c29e0e666e6cb671ee35db049f83826c73429eb158626910f1d4a9132af277b5225c606117eef39f14e87e7f2a7918812870087e8e8b62b9a4eaf6232f1dac8bf6cc23f70d939828d92bc2996e12fc24f3eeb6f5ddf01f34253f149aba09019cb8c8a7aca779e7815e0f5dc386fcc1dc3397e60b164ec4cd5d9cd5dfc0e93e2189056da8c2fe857b4eed23b9f014e1ba85ce025bd3d424891d5024dc59b885838edeb4448b24adacc09706a04f432a76782d61990c76492f6a2cf13b0af783ed3782a99596d1b4b3bfb420e945e00ebf1c14a2506d4793a77b0f3053e09c74cc3b36d433bb1e751008dc26d6f38710355e594ea894a5e63e4de52539d79c226ac2c5253c26f06a1480088770f93d1d4bf5778987967225de6b3d650a24d823244c7615857ae35669e005440f6e6daea2d308112bfbd0cac1adaac607f542f21d9e5ce870303c9db113ed8183ab7ad9bf3e6b834c586853435e9dc59c8b591c2bda929191c5d7cd84132cc93d76002989ea85ba97b8daace6077699c7e3195ca599d2f116df314ba8cb08808eb9c62c614b10428084873edcb204a557d8bcc9097f9c2947416244ab59c8e97adfe10e233ca816d7cb30bdc95fe427f25a85c0b1f8456a420dca8a14498585160dd2bd27c74dfa3a9832b9ead4306fc86ea419305e347096468bac3f5c6ba4b90cc9eb347cb18b4d97afc985a14c3b6b5ccef017a94f44f14b82b3d9f9d84e7d2206503b4cd3b9b6c688accefc829c8cacb121dc226f6c5ecaf33a23ad66f13ae6b951bf9d58cfee934e0a8f673280afbaededecac0f6c49ebbae501e1f0c6e21160b09ee4cefc5f5780bb38acc846215f7cb2d4f715945c02d8966e8b98dd109577b449dda360bc904c208bc5187482593ae860b94d9a35944a593b7d855127306bfb1f9b69ab80fe4def8cf8e2a196c1202b340e6f2d3e47127bf7d462a92a105ad29100543966db4591eef68413ae506c6766e9a01697ea3d63df8c6dda5e3aa83146f6123cc8b6adaf1a818ae90051f1089ab7b8cd5ac38e43ed565db2a147e03ce9272e52b83ff829777599f768532bfbf524b9445de1747b69266e3ffce7d106b4302b515022442edaa222d977cac20978ddeaf27fac150fce863902301af157060e2a15fa319e56152bac980ae46f3c36b86b940af1d04efadfddb80255967c1030054f022cd5ccf5df351671b18ec7ea1567169c3e7c242457c6c7f85b60049e7627d8a867eff4f0cc30ffa7a0d7618b26c56290f0ca88ca4290e05c28f0e7ead7f4a7015b97c6bbd5b7d1a3841afaf8b551e5996a29baa442a0a3ef112b21b9d64f7cf016419bac1c597c599bc7bf79e57bd79573cf1db08d65f60b47cd6d3fc3e259459c0ed563b3dbf2dd9d7fb76c2d8c928d39005df91c0a1d1339689cd24c54dbb59f1c43bc9890315dd58226697f205c97fd62d578b8825f3fd8abd1a03ed276dc9ec0cb3f4541ee776d42cbcc41dce3f6ccb6d2715bbfcecc9c1f22e9386c3c5491f778d9f7b71a1dd893b54536090decfd61341c0464870c29bd5e07c7040446f2db03cb42477fe652913f4a20f466f2ad6d98996a3e9ac49c8f6d367929c97944e9c98eb663539e7393c5400dd58fe5bcca44568bd7c05e786999cb0f22aa1eb9258a89c241d90809f457a8ab861139cc762a023f34623ce8345e5c520835e5c1e568217500ab4e5e24b6201c6ec0cc9c78ccf5d4f28b42e2691ccde211d515ec8031f440e2d00a716d73c12e458994dff7d5493961a2c1394e8a0f630f63f612a8b5eb991347dea7d67c89ef920d3fea2412ffba7938f1c967facf10c0d54eb9a647446ef22a592b19f76a85351096812671"),
		hexDecodeOrDie("262049d0fdf9df8b4d43d28f4dd7f7444df4b6eea2a6311006596e70f203582b4c21e6143164e7a113e8651eb92461b8a231833d4eab007ad5629f10116811867c50fa732c672007aafa1471d17d34507f768cce9c9c43ff1d3be6e13b2d17da19614dba1f05b4638031909884aee66706502191bb1f11ff384e08aca115deb6586e240f8f7a2f3de24c32084da352fc3a01b91f1661b7c72ff9512f769a3b237c36f1a9d3e00fdafb90fc767cfda914a5c516bd1dff0641869894e7a4129de6120e3a38a1aaeb930b295707d8e98e69c0c6a04cd6116f4f267e2960aa0973388c6c2c857f3f195ae63e4f69d039311b1e7c0e3f222d37d2a1c4cd396708a10f74096a48cd69c96a4926636dfeb98d5d27629e51a436424c5fa449340dd495fd666fdbf363a4fc02abb22148b9a4c7472b6b27ed032b376409d98c7d8d68a5107fc20c7c8bcdf36d42e2779e29e02f89e2a4a2356db4d5df449160cb89eb0465cf3375a3ef4cdffd0d9f2ea6e88a75ec3a94af70e5167e92795ba02b29aa39b324a86ec7df4c81af4089feca9f26afaf450b5ca10cac75ccb2f1056de1609b957fc1a9b6f98cb87b0600462d77a74762017111d830c8c8cc732351871950bf303ee4cf529d665e7a1142d5403263124176671131279e640d7d06e7b2b192839c11093f5e0488cc080394445ed56aec57c350a4ef5ad836123dad1a0b4b9859a23c2aa9e28f23f0ad5a02090f54e1aebe18dfd40ca9d093bad2327c4eacbb769256bd77ab4465ec1727aa069e5470d15aa926a495982830959cabbc83883461e022357c21438fe7ffc68d23ce7681610ea5b58012c2930737c1ba9214ee296cefb0aeab8d1def67715614d338988e472bffe21c8f10f44c546339cb97c99db74ae12b468470a3c3757f9b283443bdb693bfbb6883863b155a717b1f603a7a7dce495365b4d89179bc3d5dd96793972eeac30d8b6e360ddfca104cdd7bd43701a09ee84833abb5b2fa291429506a8b5c287ab8df3be3bb7a989a622e5475228b18b379370b14a5d67a8296ca225eb12310c09f3ed79d7103f967bc01d1b111635a4e4a64118ee906ecde985d5f3f45353e457fa9e380a696a2db700021a69035f03872e2328568da3608e3cac7573089109ef7b8d5a2d31625b0e83e44dd4d681267093a9dd27f5f447cb47211d840f110337049c69eb313798adac94a57783f2aa9b332f0c9c19d9080b3b053f0204e98593215c1adb35430a60955f965ce4e26fcaa5d33f34680ccf4d3eee4a1b197061565529f23a792f5dc9a9b47d6d363a6aba6179540b6a3931dfc9013619cf5d2bb6892ef044e4a9a4fa4c36885d7c43c9ffcda40d66d1ef5c9e15374b293a34a3a5f614f6f2154d58036f560c66cd03b2cf7ba5f83cee5038aaa64a44a139046438c316ee5a5a0f119b69692c5bc4fa91de803a9adf0f27a8ba289e1ced62be9a1cf602d6427de5975ab6d3d5cc6cbcf21949927083bfa473ddcad41bc9b5279b653ba3fb409ef7ddbb70f85055ba0c0bb48543bf26df7c6fe0859a3c6e61a76e89ea564ca09e7be3fee04381c90e8672c41e991e3b3a69cabf1b43ca2ce2ee21ef0503a3bb243c89754ce1c0f72c87a31052ba8ebc99f583a5fc0d5919fd8cffc3a1ddf904ad88e29ceb0e09fb2aa91f6d7cb328c7b911888ee051b55a4b53db9b271899f2a362bc36ed08f1c049929f48ab5b24de5738c9a58a4329bcba5289790ab29f33f90580345105cddb00bbd212cbd781e844564fda4f459ba685acaf918f6f91308bd4ec1b1e47ac06e499619070c1af02267da698fdcce8d6f51d4028b359bc3c38ee1e087efeb06f151edfbb5ee8055d58108c551db35d75086f9ee3c8b3ffe2f1c4afc2334e23e9419d828308dc7086a21389d37e155590aa7d7935f83231ec223e82b8a739e7b4638c7e5db48fa05f244100a10df96bd3460a15760fc79d3d89c1bd622d4be6230a11aea97533a9c829de49c76b851841da2f7420a45422d97b7cf217e7db9b3d1c9c83b8faa658e5f62071fe4095f4c9ea60d13a4c9b9589bdfdbf6a7b0a183cc2c80c9aed4233f2bdfffc1539bd37df83defba9e3b6d74b59f8632c603d7794aed5620669b32aeced8a4b3ebae7786c2111ee771aaf20569f21309b0b5d691058bb8358c5e040f8daeb3ca7eed441fe5e7d62b538bb62762205127c9a9fdd6ead6b8af6c7a055ef9f29ac4e2303ecd4d99ac6b2bab2fbed74e6bcd0473ff47569d7003c900f8846077e05e2f0732bb3debf7ecf69797c2a53a93e558e262499128db717e7ba9014986332679e7e66eb317ac6b6236c6f109defba7bf4ddb4e1a15f8c379a469ab4372be13a3c1606681d02bdbc446a6d79fee956c2772b4bbd5cd685870064afb1aae1099018c618034f87a0ccc81942069ec0b5bdf1e0dd1977dede868fdf62bc47e63e7002a7ef1b1be0c8e55cae4f12dd9cab2b1697242efacd867f2d33c855db1db5fa38ca30028ac542749d62847d554b9e124349007861a7df7ac0b16e45255c7ecade7b007b4688b25e47313b1bb3d746a33c90a2118f00e247ce5d09ce9a1dac79ed45b3ca6b30dc6bd38ea7b9598bfd710a12040ca06c06767a434855d5ecefd114f09b2b92be8df1d8d545c68c6b2e17f5ee4f4f925e00c5eeb3dc1d0b1b9e8752215737a1d24d95731dd80b598c6fd779b9cbec0c3e409ab228a8cc1641d118c09e7c2030a05b4d15bcdcfa5ed0908fa0ed0de91c8b414cad33a7f87b4e4bdb58e9c40d6854e3e935fb18bebc657b5b030c5fc097088c39b84fc646bd8bdb4b83a422a00bdf02863bb8e5a75c7ab99f1524e1e747494a0fe2d1264022750f4fd14c08b9566a81f8e0a46a391616e551352432133c5570001e56b4fb6d8d63c5321346d66d8fa401795885139b710767c3754c776c4918caf53415e28cbca76b8c93aba11cc285eccbd7a972b46e4c3925a9a528d3c111afbbf125cdc12f3cd1a5ce7c4238a6edc36ff13ad48bb5ba7fd801b1700a6144c5a567567fc909ba70f4a993fd667c168e9bb4f4e68013e55d602774f9f7f6c7705ccf48adc97b90b3a37511848621f02a72371524418e2234bc6c7d194a5b43bd1404c20c40e8fdcf53f4208d7be0b7c927c8ce81334379e3038ea7d6636e2ddb3e93360e1867de0599744976697504b674c06fa0c6a80624e7a026636ddd7ed8e919ec9dc572f3518bf7295ab6da5d355fa39713a0cbf3c13db329709a5629b3134a953b0a2bdd1df6ab2be702e828eba7fb1369bd337da1e2d9d407737e7ac9c67a593fff5513860431b56350f8bc302d2cc97150329e93222787d36cbfbd292160c73a8f39fc81ca83ff569ac068cc7819b64f79943eb5eda77be352a863399aa028c1b5029e6858b13145df60c272eb34a6e348c70f06cd5da1c098fa0ff45f810c040e92391d0b82ea09931f490fd8914d78088d371f7ff4a8dbe7a5c4067bdd75042c31fe4185203af54db88e75e213c175c679d81f0795128f51d94272f7fdfbd98c8c873dd33878a81364916886310c4a4e050f44a3b3cfe12b048e4ee5262ba7998655bfdb6afdf88ee77c88409f0fe06be2474dcb8773fc6628de1865355f9cffcf77c9a8e2c598c6677badd9c0f2cd97d3b32a45962d841a72b"),
	}
)

/*
func Test_generateKeysFromMnemonicList(t *testing.T) {
	rdr := strings.NewReader(testMnemonic)
	scanner := bufio.NewScanner(rdr)
	keysPerMnemonic := 5
	pubKeys, privKeys, err := generateKeysFromMnemonicList(scanner, keysPerMnemonic)
	require.NoError(t, err)
	require.Equal(t, keysPerMnemonic, len(pubKeys))
	require.Equal(t, keysPerMnemonic, len(privKeys))

	// Text the generated keys match some predetermined ones for the test.
	for i, key := range privKeys {
		require.DeepEqual(t, testPrivKeys[i], key)
	}
	for i, key := range pubKeys {
		require.DeepEqual(t, testPubKeys[i], key)
	}
}
*/

func Test_spreadKeysAcrossImportedWallets(t *testing.T) {
	walletPassword := "Sr0ngPass0q0z929301"
	tmpDir := filepath.Join(t.TempDir(), "testwallets")

	// Spread 5 keys across 5 wallets, meaning there is 1
	// key per wallet stored on disk.
	numWallets := 5
	keysPerWallet := 1
	err := spreadKeysAcrossLocalWallets(
		testPubKeys,
		testSeeds,
		numWallets,
		keysPerWallet,
		tmpDir,
		walletPassword,
	)
	require.NoError(t, err)
	ctx := context.Background()
	for i := 0; i < numWallets; i++ {
		w, err := wallet.OpenWallet(ctx, &wallet.Config{
			WalletDir:      filepath.Join(tmpDir, fmt.Sprintf("wallet_%d", i)),
			KeymanagerKind: keymanager.Local,
			WalletPassword: walletPassword,
		})
		require.NoError(t, err)
		km, err := local.NewKeymanager(ctx, &local.SetupConfig{
			Wallet: w,
		})
		require.NoError(t, err)
		pubKeys, err := km.FetchValidatingPublicKeys(ctx)
		require.NoError(t, err)
		require.Equal(t, 1, len(pubKeys))
		require.DeepEqual(t, testPubKeys[i], pubKeys[0][:])
	}
}

func hexDecodeOrDie(str string) []byte {
	decoded, err := hex.DecodeString(str)
	if err != nil {
		panic(err)
	}
	return decoded
}
